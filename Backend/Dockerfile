FROM node:lts-alpine

ARG SERVICENAME
ARG SERVICEDIR
ARG ARG_PORT
ARG ARG_DB_PSW

ENV PORT=$ARG_PORT
ENV DB_PSW=$ARG_DB_PSW

RUN mkdir -p /app/$SERVICENAME
WORKDIR /app/$SERVICENAME
RUN ls
COPY /$SERVICEDIR .
RUN ls
RUN npm install --unsafe-perm
EXPOSE $ARG_PORT
CMD npm run deploy